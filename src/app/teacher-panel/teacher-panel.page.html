<ion-header>
  <ion-toolbar color="none" style="background: white;">
    <div class="headerparent">

      <div class="header">
        <div style="color: black;" class="name">
          TheSmartSchool
        </div>
        <div class="items">

          <div id="oho" style="display: flex;">
            <ion-icon style="font-size: 50px;" name="person-circle-outline"></ion-icon>
            <ion-label style="position: relative;font-size: 25px;top: 0.5em;">{{name}}</ion-label>
            <ion-icon (click)="opnelist()" style="position: relative;top: 1.2em;" name="caret-down-outline"></ion-icon>
          </div>
        </div>
      </div>
    </div>
  </ion-toolbar>
</ion-header>
<ion-content>


  <ion-grid>
    <ion-row>
      <!--
        //////////////////////////////////////
                SIDE MENU
        /////////////////////////////////////        
      -->
      <ion-col size="3">

        <div id="mySidenav" class="sidenav">

          <div style="padding-left: 8px;padding-right: 8px;">

            <ion-item style="border-bottom: 2px solid skyblue;" *ngIf="currentDiv=='home'" color="none">
              <ion-label style="color: skyblue;font-weight: bold;" class="a ">
                <ion-icon name="home"></ion-icon>
                HOME
              </ion-label>
            </ion-item>

            <ion-item (click)="gotoDiv('home')" *ngIf="currentDiv!='home'" color="none">
              <ion-label class="a label">
                <ion-icon name="home"></ion-icon>
                HOME
              </ion-label>
            </ion-item>


            <ion-item style="border-bottom: 2px solid skyblue;" *ngIf="currentDiv=='students'" color="none">
              <ion-label style="color: skyblue;font-weight: bold;" class="a">
                <ion-icon name="wallet"></ion-icon>
                MANAGE CLASS
              </ion-label>
            </ion-item>

            <ion-item (click)="gotoDiv('students')" *ngIf="currentDiv!='students'" color="none">
              <ion-label class="a label">
                <ion-icon name="wallet"></ion-icon>
                MANAGE CLASS
              </ion-label>
            </ion-item>





            <ion-item (click)="logOut()" color="none">
              <ion-label color="danger" style="color: red;" class=" label">
                <ion-icon color="danger" name="log-out"></ion-icon>
                LOGOUT
              </ion-label>
            </ion-item>



          </div>
        </div>

      </ion-col>

      <!--
        //////////////////////////////////////
                MAIN
        /////////////////////////////////////        
      -->
      <ion-col *ngIf="currentDiv=='home'" size="8">

        <div *ngIf="currentDiv == 'home'" style="color: black;padding-top: 10px;">
          <ion-label style="color: black;font-weight: bold;">
            WELCOME

            <p>to the Teacher services of Smart School Online</p>
          </ion-label>

          <div style="display: flex;flex-wrap: wrap;margin-top: 2em;">

            <div style="text-align: center;max-width: 90%;position: relative;left: 3em;top: 20%;">

              <div style="display: flex;justify-content: space-between;">
                <h1 style="color: black;font-family: text;font-weight: bold;">ANNOUNCEMENTS</h1>

              </div>


              <div style="height: 2em;">

              </div>

              <div
                style="height: 40em;width: 100%;border: 2px solid rgba(0, 0, 0, 0.514);border-radius: 25px;background: white;overflow-y: auto;">

                <h1 style="color: black;font-family: text;text-align: center;">LISTED ANNOUNCEMENTS</h1>

                <div style="display: flex;justify-content: center;align-items: center;text-align: center;">

                  <div style="width: 70%;color: black;">
                    <ion-title
                      style="color: black;font-weight: bold;font-family: Arial, Helvetica, sans-serif;text-align: center;">
                      MESSAGE
                    </ion-title>




                  </div>


                </div>


                <div *ngFor="let item of announce"
                  style="display: flex;justify-content: center;align-items: center;text-align: center;flex-direction: column;">

                  <div *ngIf="item.text" style="display: flex;flex-direction: column;width: 70%;">
                    <h6 style="position: relative;width: 90%;text-align: center;">
                      {{item.text}}</h6>



                  </div>
                  <div style="height: 2px;width: 100%;background-color: black;">

                  </div>



                </div>

              </div>

            </div>



          </div>


        </div>
      </ion-col>

      <ion-col *ngIf="currentDiv=='students'">

        <div *ngIf="!class">
          <h1 style="font-size:40px;color:black;font-family: impact;text-align: center;">
            AVAILABLE CLASSES FOR THIS YEAR
          </h1>

          <table *ngIf="availableclasses">
            <thead>
              <tr>
                <th>CLASS Name</th>
                <th>Attendence</th>
                <th>MARKS</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of availableclasses" style="color: black;">
                <td data-column="Student Name">{{item.name}}</td>

                <td data-column="Twitter">
                  <ion-button expand='block' (click)="manageclass(item.uid,'attendence')" color="warning" mode='ios'>
                    MANAGE
                  </ion-button>
                </td>

                <td data-column="Twitter">
                  <ion-button expand='block' (click)="manageclass(item.uid,'marks')" color="warning" mode='ios'>
                    MANAGE
                  </ion-button>
                </td>

              </tr>

            </tbody>
          </table>
        </div>

        <div *ngIf="class && att">
          <h1 style="font-size:40px;color:black;font-family: impact;text-align: center;">
            ADD A STUDENT
          </h1>
          <div style="display: flex;justify-content: center;align-items: center;">

            <ion-card style="width: 3000px;">
              <ion-card-content>
                <p style="font-family: text;color: black;text-align: center;">ADD A STUDENT WITH REG NUMBER</p>
                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER REG NO:</ion-label>
                  <ion-input [(ngModel)]='regNo' placeholder='ENTER REG NO OF STUDENT TO ADD' style="color: black;">
                  </ion-input>
                </ion-item>

                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER NAME:</ion-label>
                  <ion-input [(ngModel)]='stdName' placeholder='ENTER Name OF STUDENT TO ADD' style="color: black;">
                  </ion-input>
                </ion-item>

              </ion-card-content>
              <div style="padding-left: 20px;padding-right: 20px;padding-bottom: 20px;">

                <ion-button (click)="addstudent()" color="primary" expand='block'>
                  ADD
                </ion-button>


                <ion-button (click)="goback()" color="danger" expand='block'>
                  goBack
                </ion-button>


              </div>
            </ion-card>

          </div>

          <div *ngIf="!attendenceexists" style="width: 100%;background-color: white;">
            <h2 style="font-size:28px;color:black;font-family: impact;text-align: center;">
              ATTENDENCE FOR {{currentTimeStamp}}
            </h2>

            <table>
              <thead>
                <tr>
                  <th>STUDENT NAME</th>
                  <th>ACTION</th>

                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of temp.students;let i=index" style="color: black;">
                  <td data-column="Student Name">{{item.name}}</td>

                  <td data-column="Twitter">
                    <ion-select [(ngModel)]="tempo[i]" (ionChange)='changeval(tempo[i],item.student,i)'
                      interface='popover'>
                      <ion-select-option *ngFor="let itemval of status" value='{{itemval}}'>
                        {{itemval}}
                      </ion-select-option>
                    </ion-select>

                  </td>




                </tr>

              </tbody>
            </table>

            <div style="display: flex;justify-content: center;align-items:center;text-align: center;">
              <ion-button (click)="add(temp.uid)">
                SUBMIT
              </ion-button>

            </div>
          </div>

          <div *ngIf="attendenceexists && temp">

            <table *ngIf="attend">
              <thead>
                <tr style="max-width: 70px;">
                  <th>STUDENT NAME</th>
                  <th style="max-width:30px ;" *ngFor="let item of attend">{{item.date}}</th>

                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of temp.students;let i=index" style="color: black;">
                  <td style="max-width: 70px;" data-column="Student Name">{{item.name}}</td>

                  <td style="max-width: 30px;" *ngFor="let check of attend" data-column="Twitter">

                    <ion-label *ngFor="let i of check.presentees" style="color: black;">

                      <span style="font-family: text;font-weight: bold;color: green;" *ngIf="i==item.student">P</span>

                    </ion-label>

                    <ion-label *ngFor="let i of check.absentees" style="color: black;">

                      <span style="font-family: text;font-weight: bold;color: green;" *ngIf="i==item.student">A</span>

                    </ion-label>


                  </td>




                </tr>

              </tbody>
            </table>

          </div>


        </div>


        <div *ngIf="class && editmarks">
          <h1 style="font-size:40px;color:black;font-family: impact;text-align: center;">
            ADD MARKS
          </h1>
          <div style="display: flex;justify-content: center;align-items: center;">

            <ion-card style="width: 3000px;">
              <ion-card-content>
                <p style="font-family: text;color: black;text-align: center;">ADD A STUDENT WITH REG NUMBER</p>
                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER REG NO:</ion-label>
                  <ion-input [(ngModel)]='regNo' type='text' placeholder='ENTER REG NO OF STUDENT '
                    style="color: black;">
                  </ion-input>
                </ion-item>

                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER NAME:</ion-label>
                  <ion-input [(ngModel)]='stdName' type='text' placeholder='ENTER Name OF STUDENT'
                    style="color: black;">
                  </ion-input>
                </ion-item>

                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER SUBJECT:</ion-label>
                  <ion-input [(ngModel)]='subject' type='text' placeholder='ENTER SUBJECT NA<E' style="color: black;">
                  </ion-input>
                </ion-item>

                <ion-item color="none">
                  <ion-label style="color: black;" position='float'>ENTER MARKS:</ion-label>
                  <ion-input [(ngModel)]='marks' type='number' placeholder='ENTER MARKS' style="color: black;">
                  </ion-input>
                </ion-item>

              </ion-card-content>
              <div style="padding-left: 20px;padding-right: 20px;padding-bottom: 20px;">

                <ion-button (click)="addmarks()" color="primary" expand='block'>
                  ADD
                </ion-button>
                <ion-button (click)="goback()" color="danger" expand='block'>
                  goBack
                </ion-button>

              </div>

            </ion-card>
          </div>
        </div>

        <table *ngIf="stdmarks">
          <thead>
            <tr>
              <th>STUDENT NAME</th>
              <th>STUDENT REGNO</th>
              <th>COURSE</th>
              <th>MARKS</th>
            </tr>
          </thead>
          <tbody *ngIf="marksarray">
            <tr *ngFor="let i of marksarray" style="color: black;">
              <td style="color: black;" data-column="Student Name">{{i.student}}</td>
              <td style="color: black;" data-column="Student Name">{{i.regNo}}</td>

              <td style="color: black;" data-column="Student Name">{{i.subject}}</td>

              <td style="color: black;" data-column="Student Name">{{i.marks}}</td>
            </tr>

          </tbody>
        </table>


      </ion-col>

      <ion-col *ngIf="currentDiv=='marks'">



      </ion-col>

    </ion-row>
  </ion-grid>

</ion-content>
<div *ngIf="list" style="position:fixed;right:10px;top:70px;z-index:1000;">
  <ion-item color="none" style="background:rgb(255, 255, 255);color:red;font-family: title;" mode="ios" button>
    <ion-label (click)="logOut()">LOGOUT</ion-label>
  </ion-item>
</div>